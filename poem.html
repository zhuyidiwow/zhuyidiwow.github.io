<!DOCTYPE html>
<html lang="en">
<head>
    <title>Poem</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <!--Google Fonts-->
    <link href='https://fonts.googleapis.com/css?family=Merriweather:300|Open+Sans|Montserrat' rel='stylesheet'
          type='text/css'>
    
    <!-- Bootstrap Main CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <!-- Bootstrap main javascript -->
    <script src="js/bootstrap.js"></script>

    <!-- Custom CSS -->
    <link href="css/poem.css" rel="stylesheet">

    <!-- Custom JQuery -->
    <script src="js/jquery.js"></script>

    <script type="text/javascript">

        var count = 7;

        $(document).ready(function () {
            $.get("resources/poems/c_count.text", function (data) {
                count = data;
            });

            var x = Math.random() * count;
            var z = Math.floor(x) + 1;
            var y = Math.random() * count;
            var z1 = Math.floor(y) + 1;

            //initialize page with a Chinese poem
            $("#poem").load("resources/poems/c" + z + ".html");

            //update page with a difference Chinese poem
            $("#ch").click(function () {
                $('#poem').fadeOut(500, function () {
                    while (z1 == z) {
                        y = Math.random() * count;
                        z1 = Math.floor(y) + 1;
                    }
                    z = z1;

                    $("#poem").load("resources/poems/c" + z + ".html");
                }).delay(200).fadeIn(500);

            });

            //update page with a difference English poem
            count = 1;
            $.get("resources/poems/e_count.text", function (data) {
                count = data;
            });
            $("#en").click(function () {
                $('#poem').fadeOut(500, function() {
                    while (z1 == z) {
                        y = Math.random() * count;
                        z1 = Math.floor(y) + 1;
                    }
                    z = z1;

                    $("#poem").load("resources/poems/e" + z + ".html");
                }).delay(200).fadeIn(500);

            });

        });

        // actually don't know how it works, copied from StackOverflow
        function shuffle(o) {
            for (var j, x, i = o.length; i; j = Math.floor(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);
            return o;
        }
    </script>
</head>
<body>

<nav class="navbar navbar-default">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="index.html">POEM</a>
        </div>
        <div class="collapse navbar-collapse" id="myNavbar">
            <ul class="nav  navbar-nav navbar-right">
                <li><a id="en" href="#">RANDOM ENGLISH</a></li>
                <li><a id="ch" href="#">RANDOM CHINESE</a></li>
            </ul>
        </div>
    </div>
</nav>

<!-- POEM -->
<div style="min-height: 1000px;">
<div id="poem">

</div>
</div>
<!-- Footer -->
<footer class="container-fluid bg-4 text-center english">
    <p>Copyright belongs to the authors</p>

    <p>@Yidi, ZHU 2016</p>
</footer>

</body>
</html>

